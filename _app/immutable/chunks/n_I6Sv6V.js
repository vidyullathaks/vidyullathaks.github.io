import{a5 as b,Q as l,aj as d}from"./9DSKxFUQ.js";function p(s,n,t){if(s==null)return n(void 0),b;const r=l(()=>s.subscribe(n,t));return r.unsubscribe?()=>r.unsubscribe():r}const i=[];function h(s,n){return{subscribe:g(s,n).subscribe}}function g(s,n=b){let t=null;const r=new Set;function c(u){if(d(s,u)&&(s=u,t)){const o=!i.length;for(const e of r)e[1](),i.push(e,s);if(o){for(let e=0;e<i.length;e+=2)i[e][0](i[e+1]);i.length=0}}}function f(u){c(u(s))}function a(u,o=b){const e=[u,o];return r.add(e),r.size===1&&(t=n(c,f)||b),u(s),()=>{r.delete(e),r.size===0&&t&&(t(),t=null)}}return{set:c,update:f,subscribe:a}}function q(s){let n;return p(s,t=>n=t)(),n}export{q as g,h as r,p as s,g as w};
